---

- name: Desktop and laptop playbook
  hosts: localhost
  connection: local
  become: true

  tasks:

    - name: add hosts to inventory groups
      add_host:
        name: "{{ inventory_hostname }}"
        groups: "{{ hostvars[inventory_hostname].pull_groups }}"
      changed_when: False

    - name: packages
      include_tasks: tasks/packages.yml

    - name: configuration
      include_tasks: tasks/configuration.yml
    
    - name: auto provision
      include_tasks: tasks/auto_provision.yml

    - name: set wallpaper
      include_tasks: tasks/wallpaper.yml

    - name: keepass plugins
      include_tasks: tasks/keepass.yml